Let us consider the Extract Local Variable refactoring which has had dynamic detection considered \ref{stolz:isolarefa} for one of its pitfalls.

TODO: Add motivating java code & dynamic fix

\begin{figure}
  \centering
  \begin{subfigure}{.4\linewidth}
    \lstinputlisting[style=refinity]{ExtractVariable/REFINITY/before.refinity}
    \caption{Before}
  \end{subfigure}\hspace{1cm}
  \begin{subfigure}{.4\linewidth}
    \lstinputlisting[style=refinity]{ExtractVariable/REFINITY/after.refinity}
    \caption{After}
  \end{subfigure}
\captionof{lstlisting}{Extract Local Variable}
\label{lst:ExtractVariable-refinity}
\end{figure}
